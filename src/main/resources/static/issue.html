<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IssuePage</title>
    <link rel="stylesheet" href="globalstyle.css">
    <link rel="stylesheet" href="issuestyle.css">
    <script src="globalScript.js"></script>
</head>
<body>
    <h1 class="tc">Issue Information</h1>
    <button class="homebutton" onclick="gotoHomePage()">Home</button>

    <span class="buttonSet">
        <button>Timeline</button>
        <button onclick="gotoIssuePage()">Issues</button>
        <button onclick="gotoAdminPage()">Admin</button>
    </span>

    <div class="issue-table center">
        <table>
            <thead>
            <tr>
                <th><button>Number#</button></th>
                <th><button class="w200">Title</button></th>
                <th><button>Milestone</button></th>
                <th><button>Sort</button></th>
                <th><button>Importance</button></th>
                <th><button>State</button></th>
                <th><button>Date</button></th>
            </tr>
            </thead>
            <tbody id="user-table-body">
            <!-- User info will be appended here -->
            </tbody>
        </table>
    </div>

    <span><input type="text" class="searchinput" placeholder="search by title..."></span>
    <button class="searchbutton">Search</button>
    <button class="addbutton" onclick="showElements()">Issue Add</button>

    <div class="popup-page"> <!---hideable 넣어라 지금은 구현하기 쉬우라고 뺐다 --->
         <button class="xbutton" onclick="hideElements()">X</button>
         <h1 class="tc">Issue Add</h1>
         <div></div>
        <button class="popup-addbutton">Add</button>
    </div>
    <div class="bg-page hideable"></div>

    <script>
        //html이 load되는 즉시 실행되는 함수
        /*
         document.addEventListener('DOMContentLoaded', function() {
            // 이 부분에 실행시키고 싶은 함수를 넣습니다.
            loadUser();
        });
         */
           async function loadUser() {
            try {
                const response = await fetch('http://localhost:8080/user');
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                const user = await response.json();

                const tableBody = document.getElementById('user-table-body');
                const newRow = document.createElement('tr');

                const nameCell = document.createElement('td');
                nameCell.textContent = user.name;
                newRow.appendChild(nameCell);

                const idCell = document.createElement('td');
                idCell.textContent = user.id;
                newRow.appendChild(idCell);

                const ageCell = document.createElement('td');
                ageCell.textContent = user.age;
                newRow.appendChild(ageCell);

                tableBody.appendChild(newRow);
            } catch (error) {
                console.error('Fetch error:', error);
            }
        }
    </script>
</body>
</html>