<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AdminPage</title>
    <link rel="stylesheet" href="globalstyle.css">
    <link rel="stylesheet" href="adminstyle.css">
    <script src="globalScript.js"></script>
</head>
<body>
    <button class="homebutton" onclick="gotoHomePage()">Home</button>
    <br><br><br><br><br>
    <h1 class="tc">Admin Page</h1>
    <div class="button-set center">
        <button onclick="openPopUp('useradd-pop')">Add User</button>
        <button onclick="openPopUp('projectadd-pop')">Add Project</button>
        <button onclick="openPopUp('usermanage-pop')">User Management</button>
    </div>
    <div id="useradd-pop" class="popup-page hide">
         <button class="xbutton" onclick="closePopUp('useradd-pop')">X</button>
         <h1 class="tc">Add User</h1>
         <div class="input-box">
             이름<input type="text" class="input-text" id="name-input" placeholder="이름을 입력하세요." style="width: 50%">
             <br>
             ID<input type="text" class="input-text" id="id-input" placeholder="ID를 입력하세요." style="width: 50%">
             <br>
             Password<input type="password" class="input-text" id="password-input" placeholder="Password를 입력하세요." style="width: 50%">
             <br>
             Level<select name="level" id="level-input">
                 <option value="PL">PL</option>
				 <option value="Developer">Developer</option>
                 <option value="Tester">Tester</option>
             </select>
         </div>
         <button class="popup-addbutton" onclick="addUser()">Add</button>
    </div>

    <div id="projectadd-pop" class="popup-page hide">
         <button class="xbutton" onclick="closePopUp('projectadd-pop')">X</button>
         <h1 class="tc">Project Add</h1>
         <div class="input-box">
             제목<input type="text" class="text-input" id="title-input" placeholder="제목을 입력하세요." style="width: 50%">
             <br>
             내용<textarea id="description-input" rows="10" cols="40" style="resize: none"></textarea>
         </div>
         <button class="popup-addbutton" onclick="addProject()">Add</button>
    </div>

    <div id="usermanage-pop" class="popup-page hide">
         <button class="xbutton" onclick="closePopUp('usermanage-pop')">X</button>
         <h1 class="tc">User Manage</h1>
        <div class="user-table center">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Level</th>
                    </tr>
                </thead>
                <tbody id="user-table-body">
                    <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                    <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                    <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>
                                        <tr>
                        <td>sihun</td>
                        <td>Developer</td>
                    </tr>


                <!-- User info will be appended here -->
                </tbody>
            </table>
        </div>
    </div>

    <div id="bg-page" class="hide"></div>

    <script>
          function closePopUp(pageId) {
              document.getElementById(pageId).classList.add('hide');
              document.getElementById('bg-page').classList.add('hide');
          }

          function openPopUp(pageId) {
              document.getElementById(pageId).classList.remove('hide');
              document.getElementById('bg-page').classList.remove('hide');
              document.querySelectorAll('.input-text').forEach(function(element) {
                 element.value = '';
              });
              document.getElementById('description-input').value = '내용을 입력하세요.';
          }
		  
		  function addUser() {
			  const fullName = document.getElementById('name-input').value;
	          const name = document.getElementById('id-input').value;
	          const password = document.getElementById('password-input').value;
			  const level = document.getElementById('level-input').value;
	          fetch('http://localhost:8080/addUser', {
	              method: 'POST',
	              headers: {
	                  'Content-Type': 'application/json'
	              },
	              body: JSON.stringify({fullName, name, password, level})
	          })
	              .then(response => response.text())
	              .then(data => {
	                  if (data === 'true') {
                          alert("유저 추가 완료");
                          gotoAdminPage();
	                  } else if (data === 'false') {
	                      alert("중복된 아이디입니다.");
	                  }
	              });
	      }
		  
		  function addProject() {
  			  const title = document.getElementById('title-input').value;
  	          const description = document.getElementById('description-input').value;
  	          fetch('http://localhost:8080/addProject', {
  	              method: 'POST',
  	              headers: {
  	                  'Content-Type': 'application/json'
  	              },
  	              body: JSON.stringify({title, description})
  	          })
  	              .then(response => response.text())
  	              .then(data => {
  	                  if (data === 'true') {
                          alert("프로젝트 추가 완료");
  	                      gotoHomePage();
  	                  } else if (data === 'false') {
  	                      alert("중복된 프로젝트입니다.");
  	                  }
  	              });
  	      }
    </script>
</body>
</html>